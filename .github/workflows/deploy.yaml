name: Deploy Nginx Application

on:
  push:
    branches:
      - master

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2

      - name: Install kubectl
        uses: azure/setup-kubectl@v1
        with:
          k8s-version: 'latest'

      - name: Configure kubectl
        run: |
          kubectl config set-context minikube # Reemplaza con el contexto de tu clúster
          kubectl config use-context minikube # Reemplaza con el contexto de tu clúster

      - name: Deploy Nginx Application
        run: |
          helm upgrade --install my-nginx ./chart/my-nginx/chart
        env:
          HELM_CHART_VERSION: '1.0.0' # Cambia esto según la versión de tu Chart
